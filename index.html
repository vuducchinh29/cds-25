<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Chuyển đổi số Hà Nội 2025</title>
  <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">


  <!-- Flipbook StyleSheet -->
  <link href="./dflip/css/dflip.min.css" rel="stylesheet" type="text/css">

  <!-- Icons Stylesheet -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@icon/themify-icons@1.0.1-alpha.3/themify-icons.min.css">

  <link href="./custom.css" rel="stylesheet" type="text/css">

</head>
<body>
  <div class="_df_book" id="flipbok_example" source="./file.pdf"></div>

  <script>
    var base = new URL("./dflip/", window.location.href).href; // ends with "/"
    window.dFlipLocation = base;
  </script>

  <!-- jQuery  -->
  <script src="./dflip/js/libs/jquery.min.js" type="text/javascript"></script>
  <!-- Flipbook main Js file -->
  <script src="./dflip/js/dflip.js" type="text/javascript"></script>

  <script>
    var option_flipbok_example = {
      height: "100%",
      // pageMode: DFLIP.PAGE_MODE.DOUBLE,
      pageMode: (window.matchMedia("(max-width: 767px)").matches ? DFLIP.PAGE_MODE.SINGLE : DFLIP.PAGE_MODE.DOUBLE),
      paddingLeft: 0,
      paddingRight: 0,
      singlePageMode: DFLIP.SINGLE_PAGE_MODE.BOOKLET,
      autoPlay: true,
      autoPlayDuration: 1000,
      allControls: "thumbnail,zoomIn,zoomOut,play,fullScreen",
      moreControls: "",
      backgroundImage: "./bg.png"
    }
  </script>

  <script>
    jQuery(function($){
      var pageAudio = new Audio();
      pageAudio.preload = "auto";

      var getAudioSrcForPage = function(page) {
        if (page === 2 || page == 3) return "./page-2_3.mp3";
        if (page === 4 || page == 5) return "./page-4_5.mp3";
        return null;
      };

      var customButtonFunction = function(event) {
        var flipbook = this;
        var page = flipbook.currentPageNumber;
        var src = getAudioSrcForPage(page);

        if (!src) {
          pageAudio.pause();
          pageAudio.removeAttribute("src");
          console.log("No audio mapped for page: " + page);
          return;
        }

        var currentSrc = pageAudio.src;
        var targetSrc = new URL(src, window.location.href).href;

        if (currentSrc === targetSrc) {
          if (pageAudio.paused) {
            pageAudio.play().catch(console.error);
          } else {
            pageAudio.pause();
          }
          return;
        }

        pageAudio.pause();
        pageAudio.src = src;
        pageAudio.currentTime = 0;
        pageAudio.play().catch(console.error);
      };

      DFLIP.defaults.onPageChanged = function(app) {
        if (!pageAudio.paused) pageAudio.pause();
      }

      DFLIP.defaults.onReady = function(flipbook) {  
        var customButton = jQuery('<div class="df-ui-btn df-ui-sound"></div>');
        customButton.on("click",customButtonFunction.bind(flipbook));
        flipbook.ui.zoomIn.after(customButton);

        var customNextButton = jQuery('<div class="df-ui-btn df-ui-next-custom"></div>');
        customNextButton.on("click", function() {
          flipbook.next();
        });
        flipbook.ui.zoomOut.after(customNextButton);

        var customPrevButton = jQuery('<div class="df-ui-btn df-ui-prev-custom"></div>');
        customPrevButton.on("click", function() {
          flipbook.prev();
        });
        flipbook.ui.zoomOut.after(customPrevButton);
      };
    });
  </script>
</body>
</html>